---
title: "反卷数学局 - 离散数学的奇妙冒险1"
date: 2025-05-13
description: "学习离散数学中非常基础且重要的概念：关系，特别是两种特殊的关系——等价关系和偏序关系"
tags: ["等价关系","偏序","等价集","链","反链"]
category: "离散数学"
draft: false
---

# 离散数学学习笔记：关系、等价关系与偏序集

## 引言

今天我们一起学习了离散数学中非常基础且重要的概念：关系，特别是两种特殊的关系——等价关系和偏序关系。这些概念是后续学习如图论、代数结构等内容的重要基石。本笔记旨在回顾和梳理这些核心定义、性质及其相关概念，希望能帮助你更好地巩固所学知识。

---

## 第一部分：关系 (回顾)

在我们深入等价关系和偏序关系之前，我们先简单回顾一下“关系”本身的一些基本定义，这些是理解后续内容的前提。

### 1.1 笛卡尔积 (Cartesian Product)

设 $A, B$ 为两个集合，它们的**笛卡尔积**，记作 $A \times B$，定义为所有可能的有序对 $(a,b)$ 的集合，其中 $a \in A$ 且 $b \in B$。
$$ A \times B = \{ (a,b) | a \in A, b \in B \} $$
如果 $|A|=m$ 且 $|B|=n$，则 $|A \times B| = m \times n$。

### 1.2 二元关系 (Binary Relation)

一个从集合 $A$ 到集合 $B$ 的**二元关系** $R$ 是 $A \times B$ 的一个子集。
如果 $(a,b) \in R$，我们称元素 $a$ 与元素 $b$ 有关系 $R$，常记作 $aRb$。

*   **定义域 (Domain of R):** $\text{dom}(R) = \{ a \in A | \exists b \in B, (a,b) \in R \}$
*   **值域 (Range of R):** $\text{ran}(R) = \{ b \in B | \exists a \in A, (a,b) \in R \}$
*   **$a$ 的像 (Image of $a$):** $R(a) = \{ b \in B | (a,b) \in R \}$
*   **$b$ 的原像 (Preimage of $b$):** $R^{-1}(b) = \{ a \in A | (a,b) \in R \}$ (这里的 $R^{-1}(b)$ 是指原像，不要与下面的反关系混淆)
*   **反关系 (Inverse Relation):** $R^{-1}: B \to A$，定义为 $R^{-1} = \{ (b,a) | (a,b) \in R \}$。

如果关系是从集合 $A$ 到其自身的关系，即 $R \subseteq A \times A$，则称 $R$ 是集合 $A$ 上的一个二元关系。

---

## 第二部分：等价关系 (Equivalence Relation)

等价关系是一种非常重要的关系，它能够将集合中的元素进行“分类”或“分组”，使得同一组内的元素在某种意义上是“相同”的。

### 2.1 等价关系的定义

设 $R$ 是集合 $A$ 上的一个二元关系。如果 $R$ 同时满足以下三个性质，则称 $R$ 是 $A$ 上的一个**等价关系**：

1.  **自反性 (Reflexivity):**
    对于任意 $a \in A$，都有 $(a,a) \in R$。
    （即：每个元素都与自身有关系。）
    数学表示：$\forall a \in A, aRa$.

2.  **对称性 (Symmetry):**
    对于任意 $a, b \in A$，如果 $(a,b) \in R$，则必有 $(b,a) \in R$。
    （即：如果 $a$ 与 $b$ 有关系，那么 $b$ 与 $a$ 也有关系。）
    数学表示：$\forall a, b \in A, (aRb \Rightarrow bRa)$.

3.  **传递性 (Transitivity):**
    对于任意 $a, b, c \in A$，如果 $(a,b) \in R$ 且 $(b,c) \in R$，则必有 $(a,c) \in R$。
    （即：如果 $a$ 与 $b$ 有关系， $b$ 与 $c$ 有关系，那么 $a$ 与 $c$ 也有关系。）
    数学表示：$\forall a, b, c \in A, (aRb \land bRc \Rightarrow aRc)$.

如果 $(x,y) \in R$ 且 $R$ 是一个等价关系，我们通常将 $x$ 与 $y$ 等价记作 $x \sim y$ 或 $x \equiv y \pmod R$。

### 2.2 等价类 (Equivalence Class)

设 $R$ 是集合 $A$ 上的一个等价关系。对于 $A$ 中的任意一个元素 $a$，**包含元素 $a$ 的等价类** (或称 $a$ 的等价类)，记作 $[a]$ 或 $[a]_R$ 或 $R(a)$，定义为集合 $A$ 中所有与 $a$ 等价的元素的集合：
$$ [a] = \{ x \in A | (x,a) \in R \} $$
或者，由于对称性，也可以写成：
$$ [a] = \{ x \in A | (a,x) \in R \} $$

**等价类的性质：**
设 $R$ 是集合 $A$ 上的等价关系，则：
1.  对于任意 $a \in A$，$a \in [a]$ (因为自反性，$aRa$)。这意味着每个元素都属于其自身的等价类，所以等价类非空。
2.  对于任意 $a, b \in A$，$[a] = [b]$ 当且仅当 $(a,b) \in R$ (即 $a \sim b$)。
3.  对于任意 $a, b \in A$，如果 $[a] \neq [b]$，则 $[a] \cap [b] = \emptyset$。
    （即：任意两个等价类，要么它们完全相同，要么它们没有任何共同元素，完全不相交。）
4.  集合 $A$ 中所有不同的等价类的并集等于 $A$ 本身。
    （即：$\bigcup_{a \in A} [a] = A$，或者更精确地说，如果 $S = \{[a] | a \in A\}$ 是所有不同等价类的集合，那么 $\bigcup_{C \in S} C = A$）

**核心思想：** 一个集合 $A$ 上的等价关系 $R$ 会将集合 $A$ **划分 (Partition)** 成若干个互不相交的非空子集，每个子集就是一个等价类。反之，集合 $A$ 的任何一个划分都唯一地决定了 $A$ 上的一个等价关系（同一划分块内的元素等价）。

**示例：**
*   **整数模 $n$ 同余关系：** 设 $A = \mathbb{Z}$ (整数集)，$n$ 是一个正整数。定义关系 $R$ 为：$aRb$ 当且仅当 $a \equiv b \pmod n$ (即 $a-b$ 是 $n$ 的倍数)。
    *   自反性：$a-a = 0 = 0 \cdot n$，所以 $aRa$。
    *   对称性：若 $a-b = kn$，则 $b-a = (-k)n$，所以 $aRb \Rightarrow bRa$。
    *   传递性：若 $a-b = k_1n$，$b-c = k_2n$，则 $a-c = (a-b) + (b-c) = (k_1+k_2)n$，所以 $aRb \land bRc \Rightarrow aRc$。
    因此，模 $n$ 同余关系是 $\mathbb{Z}$ 上的一个等价关系。
    等价类有 $n$ 个：$[0], [1], \dots, [n-1]$。例如，对于 $n=3$，等价类为：
    $[0] = \{ \dots, -6, -3, 0, 3, 6, \dots \}$
    $[1] = \{ \dots, -5, -2, 1, 4, 7, \dots \}$
    $[2] = \{ \dots, -4, -1, 2, 5, 8, \dots \}$
    这些等价类构成了 $\mathbb{Z}$ 的一个划分。

---

## 第三部分：偏序关系与偏序集 (Partial Order and Poset)

偏序关系是另一种重要的关系类型，它为集合中的元素定义了一种“顺序”或“层次”，但这种顺序不一定是“完全”的。

### 3.1 偏序关系的定义

设 $P$ (或常用 $\le$ 来表示) 是集合 $X$ 上的一个二元关系。如果 $P$ (或 $\le$) 同时满足以下三个性质，则称 $P$ (或 $\le$) 是 $X$ 上的一个**偏序关系 (Partial Order Relation)**：

1.  **自反性 (Reflexivity):**
    对于任意 $x \in X$，都有 $(x,x) \in P$ (或 $x \le x$)。
    （即：每个元素都“小于等于”其自身。）

2.  **反对称性 (Antisymmetry):**
    对于任意 $x, y \in X$，如果 $(x,y) \in P$ 且 $(y,x) \in P$ (或 $x \le y$ 且 $y \le x$)，则必有 $x = y$。
    （即：如果 $x$ “小于等于” $y$，并且 $y$ “小于等于” $x$，那么 $x$ 和 $y$ 必须是同一个元素。不允许两个不同的元素互相“小于等于”对方。）
    **注意与对称性的区别！** 对称性是说如果 $xRy$ 则 $yRx$；反对称性是说如果 $xRy$ 且 $yRx$ 则 $x=y$。

3.  **传递性 (Transitivity):**
    对于任意 $x, y, z \in X$，如果 $(x,y) \in P$ 且 $(y,z) \in P$ (或 $x \le y$ 且 $y \le z$)，则必有 $(x,z) \in P$ (或 $x \le z$)。
    （即：如果 $x$ “小于等于” $y$，$y$ “小于等于” $z$，那么 $x$ “小于等于” $z$。）

一个非空集合 $X$ 和定义在其上的偏序关系 $P$ (或 $\le$) 一起构成一个**偏序集 (Partially Ordered Set, or Poset)**，记作 $(X, P)$ 或 $(X, \le)$。有时在不引起混淆的情况下，也直接称 $X$ 是一个偏序集。

**“偏序”的含义：** “偏”字意味着在集合 $X$ 中，可能存在某些元素对 $(x,y)$，它们之间是**不可比的 (incomparable)**，即既不满足 $x \le y$，也不满足 $y \le x$。

### 3.2 严格偏序关系 (Strict Partial Order)

由一个偏序关系 $\le$，我们可以定义一个相应的**严格偏序关系** $<$:
$$ x < y \quad \text{当且仅当} \quad x \le y \text{ 且 } x \neq y $$
严格偏序关系 $<$ 具有以下性质：
1.  **非自反性 (Irreflexivity / Antireflexivity):** $\forall x \in X, \neg(x < x)$ (没有元素严格小于自身)。
2.  **非对称性 (Asymmetry):** $\forall x, y \in X, (x < y \Rightarrow \neg(y < x))$ (如果 $x < y$，则 $y < x$ 不可能成立)。
3.  **传递性 (Transitivity):** $\forall x, y, z \in X, (x < y \land y < z \Rightarrow x < z)$。

### 3.3 偏序集的例子

1.  **正整数集合上的整除关系:**
    设 $\mathbb{Z}^+$ 为全体正整数集合。定义关系 $a | b$ 表示 "$a$ 整除 $b$" (即 $b$ 是 $a$ 的倍数)。
    偏序集是 $(\mathbb{Z}^+, |)$。
    *   自反性：$\forall a \in \mathbb{Z}^+, a|a$ (例如 $3|3$)。
    *   反对称性：$\forall a,b \in \mathbb{Z}^+$, 若 $a|b$ 且 $b|a$，则 $a=b$。
    *   传递性：$\forall a,b,c \in \mathbb{Z}^+$, 若 $a|b$ 且 $b|c$，则 $a|c$ (例如 $2|4$ 且 $4|8 \Rightarrow 2|8$)。
    这是一个偏序，因为例如 $2$ 和 $3$ 是不可比的 ( $2 \nmid 3$ 且 $3 \nmid 2$)。

2.  **幂集上的子集关系:**
    设 $S$ 是一个集合，$\mathcal{P}(S)$ (或 $P(S)$) 是 $S$ 的幂集 (即 $S$ 的所有子集组成的集合)。定义关系 $A \subseteq B$ 表示 "$A$ 是 $B$ 的子集"。
    偏序集是 $(\mathcal{P}(S), \subseteq)$。
    *   自反性：$\forall A \in \mathcal{P}(S), A \subseteq A$。
    *   反对称性：$\forall A,B \in \mathcal{P}(S)$, 若 $A \subseteq B$ 且 $B \subseteq A$，则 $A=B$。
    *   传递性：$\forall A,B,C \in \mathcal{P}(S)$, 若 $A \subseteq B$ 且 $B \subseteq C$，则 $A \subseteq C$。
    这也是一个偏序，例如若 $S=\{1,2,3\}$，则子集 $\{1,2\}$ 和 $\{1,3\}$ 是不可比的。

3.  **线性空间中的子空间关系 (例 1.2.4):**
    设 $V$ 是域 $F$ 上的一个线性空间， $L(V)$ 为 $V$ 的所有子空间所组成的集合。规定 $U \le W$ 当且仅当 $U \subseteq W$ (U 是 W 的子空间)。则 $(L(V), \subseteq)$ 是一个偏序集。
    若 $L_f(V)$ 表示 $V$ 的所有有限维子空间组成的集合，则 $(L_f(V), \subseteq)$ 也是一个偏序集。

---

## 第四部分：偏序集中的重要概念

在偏序集 $(X, \le)$ 的基础上，我们可以定义一些更具体的结构和度量。

### 4.1 全序集 (链) (Total Order / Chain)

给定偏序集 $P=(X, \le)$。如果对于 $X$ 中的**任意两个元素** $x, y$，都有 $x \le y$ 或 $y \le x$ 至少一者成立，则称 $P$ 为一个**全序集 (Totally Ordered Set)**，也称为**链 (Chain)**。
在全序集中，任何两个元素都是可比较的，它们可以像链条一样完全排好序。

**例子：**
*   $(\mathbb{N}, \le)$ (自然数集和通常的小于等于关系) 是一个全序集/链。
*   在 $(\mathbb{Z}^+, |)$ 中，子集 $\{1, 2, 4, 8, 16\}$ 构成一个链，因为 $1|2, 2|4, 4|8, 8|16$。

### 4.2 反链 (Antichain)

给定偏序集 $P=(X, \le)$。如果对于 $X$ 中任意两个**相异的**元素 $x, y$ ($x \neq y$)，都有 $x \not\le y$ 且 $y \not\le x$ (即 $x$ 和 $y$ 均不可比)，则称 $P$ (或者集合 $X$ 本身，如果 $X$ 是一个子集) 为一个**反链 (Antichain)**。

**例子：**
*   在 $(\mathbb{Z}^+, |)$ 中，素数集合 $\{2, 3, 5, 7, \dots\}$ 构成一个反链，因为任意两个不同的素数都不能整除对方。
*   在 $(\mathcal{P}(\{1,2,3\}), \subseteq)$ 中，集合 $\{\{1\}, \{2\}, \{3\}\}$ 是一个反链。集合 $\{\{1,2\}, \{1,3\}, \{2,3\}\}$ 也是一个反链。

### 4.3 链与反链的长度 (Length of Chains and Antichains)

一个**有限**链或反链中的**元素个数**称为它的**长度 (length)**。
*   **注意：** 有些教材可能将链的长度定义为“元素个数 - 1”（即边的数量）。请根据你所用教材的定义为准。在本笔记中，我们遵循“元素个数”的定义。
*   例如，链 $C = \{1, 2, 4, 8\}$ (在 $(\mathbb{Z}^+, |)$ 下)，其长度为 4。
*   反链 $A = \{\{1\}, \{2\}, \{3\}\}$ (在 $(\mathcal{P}(\{1,2,3\}), \subseteq)$ 下)，其长度为 3。

### 4.4 子偏序集 (Sub-poset)

给定偏序集 $(X, P)$。若 $X'$ 是 $X$ 的一个子集，则 $P$ 在 $X'$ 上的限制（即只考虑 $X'$ 中元素之间的 $P$ 关系）也构成一个偏序集，称 $P'=(X', P|_{X' \times X'})$ 为 $(X,P)$ 的**子偏序集**。
简单来说，从原偏序集中选取一部分元素，它们之间原有的偏序关系保持不变，形成的新偏序集就是子偏序集。

**例子 (例 1.2.7):**
*   在偏序集 $P = (\mathbb{Z}^+, |)$ 中：
    *   令 $X_1 = \{m | m = 2^k, k \in \mathbb{N}_0 \} = \{1, 2, 4, 8, \dots\}$。则 $(X_1, |)$ 是 $P$ 的一个子偏序集，并且它是一个链。
    *   令 $X_2 = \{p | p \text{ 是素数} \}$。则 $(X_2, |)$ 是 $P$ 的一个子偏序集，并且它是一个反链。

### 4.5 偏序集的高度 (Height)

偏序集 $(X, P)$ 中**最长子链的长度**（元素个数）称为这个偏序集的**高度 (Height)**。
高度衡量了偏序集中“垂直方向”上的最大延伸。

**例子：**
考虑偏序集 $(D_{12}, |)$，其中 $D_{12} = \{1, 2, 3, 4, 6, 12\}$ 是12的所有正因子。
*   链 $C_1 = \{1, 2, 4, 12\}$，长度为 4。
*   链 $C_2 = \{1, 3, 6, 12\}$，长度为 4。
*   链 $C_3 = \{1, 2, 6, 12\}$，长度为 4。
最长的子链长度是 4，所以偏序集 $(D_{12}, |)$ 的高度是 4。

### 4.6 偏序集的宽度 (Width)

偏序集 $(X, P)$ 中**最长子反链的长度**（元素个数）称为这个偏序集的**宽度 (Width)**。
宽度衡量了偏序集中“水平方向”上的最大不可比元素的数量。

**例子：**
继续考虑偏序集 $(D_{12}, |)$。
*   反链 $A_1 = \{4, 6\}$ (因为 $4 \nmid 6$ 且 $6 \nmid 4$)，长度为 2。
*   反链 $A_2 = \{2, 3\}$，长度为 2。
*   考虑 $\{3, 4\}$，长度为 2。
*   尝试找长度为3的反链：例如 $\{2,3,4\}$？不行，$2|4$。$\{3,4,6\}$？不行，$3|6$。
似乎最长的子反链长度是 2。所以偏序集 $(D_{12}, |)$ 的宽度是 2。
（根据Dilworth定理，一个有限偏序集的宽度等于其最小链划分中链的数目。一个有限偏序集的高度等于其最小反链划分中反链的数目——Sperner定理是关于幂集反链的一个特例。）

---

## 总结与展望

今天我们系统地学习了等价关系和偏序关系这两个核心概念。
*   **等价关系**通过其自反性、对称性和传递性，将集合元素划分为互不相交的等价类，实现了对元素的“分类”。
*   **偏序关系**通过其自反性、反对称性和传递性，为集合元素赋予了一种“顺序”，但这种顺序可能是“部分的”，允许不可比元素的存在。
*   在此基础上，我们进一步探讨了偏序集中的链、反链、子偏序集、高度和宽度等重要概念，这些都是描述和分析偏序集结构的重要工具。