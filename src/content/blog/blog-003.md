---
title: "反卷数学局 - 组合数学的奇妙冒险4"
description: "拉姆齐数上界公式？ccj手撕给你看！"
date: 2025-05-15T11:57:17.791Z
tags: ["拉姆齐数","鸽巢原理","握手引理","帕斯卡恒等式"]
category: "组合数学"
draft: false
---

# 拉姆齐数两大上界公式证明全解析：反卷ccj带你笑学组合数学！

**作者：反卷ccj**

哈喽艾瑞巴蒂！你们的数学圈反卷第一人，致力于让你笑出腹肌、爱上数学的播主——**反卷ccj**，又闪亮登场啦！

拉姆齐数 $r(s,t)$ 这个小妖精，代表的是“在一个足够大的派对上，必然存在 $s$ 个互相认识的人或者 $t$ 个互相不认识的人”的那个神奇数字。很多小伙伴听完之后，眼睛瞪得像铜铃，纷纷表示：“哇塞，ccj，这太酷了！但是……这些数到底是怎么算出来的？你说它存在，它就存在啦？你说它有个上限，那上限又是怎么来的？”

问得好！不愧是我的粉丝，求知欲旺盛得像打了鸡血！今天，ccj就满足你们的好奇心，咱们不搞那些虚头巴脑的，直接上硬菜——把拉姆齐数那两个最核心、最经典的上界公式的证明，给它扒个底朝天，揉个稀巴烂，让你看得明明白白，以后出去吹牛都有底气！

别担心，虽然是“证明”，但有ccj在，保证过程风趣幽默，绝不枯燥。当然，在幽默的外表下，咱们的数学内核绝对严谨，公式符号都会用专业的 KaTeX 排版，保证各位数学专业的同学也能看得舒心。准备好了吗？系好安全带，咱们的数学过山车，发车咯！

## 拉姆齐数：混乱中的必然秩序（简要回顾）

在我们开始今天的“庖丁解牛”之前，先快速回顾一下主角。**拉姆齐数 $r(s,t)$** 定义为最小的正整数 $n$，使得对于一个拥有 $n$ 个顶点的完全图 $K_n$（每两个顶点之间都有一条边），无论我们怎么给它的边涂上红色或蓝色（代表两种对立关系，比如“认识”与“不认识”），图中都必然存在一个纯红色的 $K_s$（$s$ 个顶点，它们之间的所有边都是红色），或者一个纯蓝色的 $K_t$（$t$ 个顶点，它们之间的所有边都是蓝色）。

咱们今天要攻克的，就是两个关于 $r(s,t)$ 上界的不等式。它们不仅证明了 $r(s,t)$ 确实存在（不是我们瞎掰的），还给了我们估算它大小的方法。

## 证明一：递归不等式 —— “选点大法”的无穷魅力！

第一个要登场的不等式，可以说是拉姆齐理论的基石之一，它长这样：

$$
r(s,t) \le r(s-1, t) + r(s, t-1)
$$


这个不等式告诉我们，想知道 $r(s,t)$ 的上限，可以参考两个规模更小的拉姆齐数 $r(s-1,t)$ 和 $r(s,t-1)$。它的证明思路，我称之为“选点大法”，充满了逻辑的巧妙。

**“选点大法”的精髓：**

想象一下，我们现在要证明上面那个不等式。根据不等式的形式，我们取一个派对，人数为 $N = r(s-1, t) + r(s, t-1)$。我们要证明，在这样一个 $N$ 人派对（也就是一个 $K_N$ 完全图）上，给任意两个人之间的关系标上“红线”（认识，红色边）或“蓝线”（不认识，蓝色边），都必然能找到 $s$ 个红线老铁（一个红色的 $K_s$）或者 $t$ 个蓝线陌路人（一个蓝色的 $K_t$）。

好，现在从这 $N$ 个顶点里，咱们随便揪出一个幸运儿（或者倒霉蛋？），就叫它顶点 $v$ 吧。顶点 $v$ 与其他 $N-1$ 个顶点都存在边相连，这些边要么是红色，要么是蓝色。
这 $N-1$ 个顶点的数量是：

$$
N-1 = r(s-1, t) + r(s, t-1) - 1
$$


现在，发挥你小学就学过的**鸽巢原理 (Pigeonhole Principle)**！顶点 $v$ 连接出去的 $N-1$ 条边，要么是红色，要么是蓝色。这就像把 $N-1$ 只鸽子放进“红色边巢”和“蓝色边巢”两个巢里。那么，必然满足以下两种情况之一：

1.  顶点 $v$ 至少连接了 $r(s-1, t)$ 条红色边。
2.  顶点 $v$ 至少连接了 $r(s, t-1)$ 条蓝色边。

为啥呢？如果第一种情况不成立，意味着 $v$ 连接的红色边数量严格小于 $r(s-1, t)$，即最多只有 $r(s-1, t) - 1$ 条。如果同时第二种情况也不成立，意味着 $v$ 连接的蓝色边数量严格小于 $r(s, t-1)$，即最多只有 $r(s, t-1) - 1$ 条。那么， $v$ 连接的总边数最多就是 $(r(s-1, t) - 1) + (r(s, t-1) - 1) = r(s-1, t) + r(s, t-1) - 2$ 条。
但这与 $v$ 实际连接了 
$$
N-1 = r(s-1, t) + r(s, t-1) - 1
$$
 条边相矛盾！因为 $r(s-1, t) + r(s, t-1) - 2 < r(s-1, t) + r(s, t-1) - 1$。所以，上面两种情况必居其一！这就是数学的无情铁证，不容狡辩！

**分情况讨论，各个击破：**

*   **情况一：顶点 $v$ 至少连接了 $r(s-1, t)$ 条红色边。**
    设这些红色边连接到的顶点的集合为 $V_{red}$，则 $|V_{red}| \ge r(s-1, t)$。
    现在，我们只看由 $V_{red}$ 中的这些顶点组成的子图。根据 $r(s-1,t)$ 的定义，在这个子图中（考虑它上面的原始染色）：
    *   要么存在一个由 $s-1$ 个顶点组成的纯红色 $K_{s-1}$。如果是这样，那么这个红色的 $K_{s-1}$ 再加上顶点 $v$（以及 $v$ 与 $K_{s-1}$ 中所有顶点之间的红边），就构成了一个红色的 $K_s$！任务完成，撒花！
    *   要么存在一个由 $t$ 个顶点组成的纯蓝色 $K_t$。如果是这样，那也直接找到了我们要的纯蓝小团体！任务同样完成！

*   **情况二：顶点 $v$ 至少连接了 $r(s, t-1)$ 条蓝色边。**
    设这些蓝色边连接到的顶点的集合为 $V_{blue}$，则 $|V_{blue}| \ge r(s, t-1)$。
    类似地，我们只看由 $V_{blue}$ 中的这些顶点组成的子图。根据 $r(s,t-1)$ 的定义，在这个子图中：
    *   要么存在一个由 $s$ 个顶点组成的纯红色 $K_s$。任务完成！
    *   要么存在一个由 $t-1$ 个顶点组成的纯蓝色 $K_{t-1}$。如果是这样，那么这个蓝色的 $K_{t-1}$ 再加上顶点 $v$（以及 $v$ 与 $K_{t-1}$ 中所有顶点之间的蓝边），就构成了一个蓝色的 $K_t$！任务也完成了！

看到了吗？无论顶点 $v$ 是“红颜知己遍天下”还是“蓝颜知己满地走”（呸，是红边多还是蓝边多），只要图的顶点数达到了 $r(s-1, t) + r(s, t-1)$，我们就总能找到目标中的纯色子图。因此，这就证明了 $r(s,t)$ 不会超过这个数，即：

$$
r(s,t) \le r(s-1, t) + r(s, t-1)
$$

这个证明是不是既巧妙又严谨？它完美地利用了拉姆齐数的定义和鸽巢原理，层层递进，最终得出结论。

**边界条件的小补充：**
这个递归关系需要一些已知的边界值才能启动。我们知道 $r(s,1)=1$ (因为一个点的图自然是红 $K_s$ 如果 $s=1$，或者一个点的图自然是蓝 $K_1$) 和 $r(1,t)=1$。更常用的是 $r(s,2)=s$ 和 $r(2,t)=t$。
为什么 $r(s,2)=s$ 呢？考虑一个 $K_s$。我们要么找到一个红色的 $K_s$，要么找到一个蓝色的 $K_2$（即一条蓝色的边）。如果在 $K_s$ 中没有蓝色的边，那它本身就是一个红色的 $K_s$。如果至少有一条蓝色的边，我们就找到了蓝色的 $K_2$。所以 $s$ 个顶点就足够了。

**一个更骚的改进：减1的艺术！**
在某些特殊情况下，上面那个不等式还可以变得更“紧”一点！如果 $r(s-1,t)$ 和 $r(s,t-1)$ **均为偶数**，那么：

$$
r(s,t) \le r(s-1, t) + r(s, t-1) - 1
$$

这个 "-1" 是怎么来的呢？这个证明用到了图论中的**握手引理 (Handshaking Lemma)**，它说任何图中所有顶点的度数之和等于边数的两倍（因此必然是偶数）。

假设 $r(s-1, t)$ 和 $r(s, t-1)$ 都是偶数。令 
$$
N_0 = r(s-1, t) + r(s, t-1) - 1
$$
。
我们考虑一个 $K_{N_0}$，并假设它**没有**红色的 $K_s$ 也没有蓝色的 $K_t$ (这是为了反证)。
如果这个假设成立，那么对于 $K_{N_0}$ 中的任意一个顶点 $x$，它连接出去的红色边的数量（我们称之为红度 $d_{red}(x)$）必须**恰好**是 $r(s-1, t) - 1$ 条。

如果 $d_{red}(x) \ge r(s-1,t)$，那么在这些红邻居中要么有红 $K_{s-1}$ 从而得到红 $K_s$，要么有蓝 $K_t$。

如果 $d_{red}(x) < r(s-1,t)-1$，那么蓝度 $d_{blue}(x) = (N_0-1) - d_{red}(x) \ge (r(s-1,t)+r(s,t-1)-2) - (r(s-1,t)-2) = r(s,t-1)$，在蓝邻居中要么有红 $K_s$，要么有蓝 $K_{t-1}$ 从而得到蓝 $K_t$。

所以，为了避免这两种情况，只能是 $d_{red}(x) = r(s-1,t)-1$。

同样，蓝度 $d_{blue}(x)$ 必须恰好是 $r(s,t-1)-1$ 条。

现在，只看红边。每个顶点的红度 $d_{red}(x) = r(s-1, t) - 1$。
因为我们假设了 $r(s-1, t)$ 是偶数，所以 $d_{red}(x)$（偶数减1）是一个**奇数**。
图中所有顶点的红度之和为 
$$
\sum_{x \in V(K_{N_0})} d_{red}(x) = N_0 \times (r(s-1, t) - 1)
$$
。
根据握手引理，这个和必须是**偶数**（因为它是红边数量的两倍）。

但是，我们来看看 $N_0$。$N_0 = r(s-1, t) + r(s, t-1) - 1$。由于 $r(s-1, t)$ 和 $r(s, t-1)$ 都是偶数，它们的和也是偶数，所以 $N_0$ (偶数减1) 是一个**奇数**。
那么，红度之和就是 (奇数 $N_0$) $\times$ (奇数 $d_{red}(x)$) = **奇数**。
这就产生了矛盾！一个数不可能同时是奇数又是偶数。
因此，我们最初的假设（$K_{N_0}$ 中没有红 $K_s$ 或蓝 $K_t$）是错误的。
所以，当 $r(s-1, t)$ 和 $r(s, t-1)$ 均为偶数时，
$$
r(s,t) \le r(s-1, t) + r(s, t-1) - 1
$$
。
这个小技巧是不是很秀？比如计算 $r(3,4)$，我们知道 $r(2,4)=4$ (偶数)，
$$
r(3,3)=6
$$
 (偶数)。所以 $r(3,4) \le r(2,4) + r(3,3) - 1 = 4 + 6 - 1 = 9$。这正好是 $r(3,4)$ 的精确值！

## 证明二：二项式系数上界 —— 帕斯卡大神的助攻！

第一个不等式虽然给力，但它是个递归的，不算起来有点麻烦。有没有一个直接用 $s$ 和 $t$ 表示的公式呢？必须有！第二个经典上界就和我们喜闻乐见的**二项式系数 (Binomial Coefficients)** 有关：

$$
r(s,t) \le \binom{s+t-2}{s-1}
$$

(或者等价地 $\binom{s+t-2}{t-1}$，因为 $\binom{n}{k} = \binom{n}{n-k}$)

这个定理的证明，通常采用对 $k = s+t$ 的**数学归纳法 (Mathematical Induction)**。各位，坐稳了，归纳法老司机要发车了！

**1. 基础情况 (Base Cases):**
我们要对 $s+t$ 的值进行归纳。
当 $s+t$ 比较小的时候，或者当 $s=2$ 或 $t=2$ 的时候，我们需要验证这个不等式成立。
我们已知 
$$
r(s,2) = s
$$
。
来看看公式右边：$\binom{s+2-2}{s-1} = \binom{s}{s-1} = \binom{s}{1} = s$。
所以，$r(s,2) = s \le \binom{s+2-2}{s-1} = s$。等号成立，完美！
同理，
$$
r(2,t) = t
$$
。公式右边是 $\binom{2+t-2}{2-1} = \binom{t}{1} = t$。
所以，$r(2,t) = t \le \binom{2+t-2}{2-1} = t$。等号也成立！

让我们再看一个稍微复杂点的，比如 $r(3,3)$。我们已知 
$$
r(3,3)=6
$$
。
公式右边是 $\binom{3+3-2}{3-1} = \binom{4}{2} = \frac{4 \times 3}{2 \times 1} = 6$。
所以，$r(3,3)=6 \le \binom{4}{2}=6$。也成立！
基础情况稳如老狗！

**2. 归纳假设 (Inductive Hypothesis):**
假设对于所有满足 $s'+t' < s+t$ 的正整数对 $(s', t')$ (并且 $s', t' \ge 2$)，不等式 $r(s',t') \le \binom{s'+t'-2}{s'-1}$ 均成立。
这个假设就是我们的“垫脚石”，我们要踩着它往上爬。

**3. 归纳步骤 (Inductive Step):**
现在我们要证明，对于当前的 $s, t$ (假设 $s,t > 2$，因为等于2的情况已经是基础了)，不等式 $r(s,t) \le \binom{s+t-2}{s-1}$ 也成立。

还记得我们第一个证明的结论吗？
$r(s,t) \le r(s-1, t) + r(s, t-1)$
（如果 $r(s-1,t)$ 和 $r(s,t-1)$ 都是偶数，我们甚至可以用减1的版本，但这会使归纳稍微复杂一点，所以我们先用不减1的标准版。用标准版得到的上界仍然是有效的，只是可能不那么紧。）

现在，我们对右边的两项应用我们的**归纳假设**：
*   对于 $r(s-1, t)$：令 $s' = s-1, t' = t$。则 $s'+t' = (s-1)+t = s+t-1 < s+t$。
    所以，根据归纳假设：
    $r(s-1, t) \le \binom{(s-1)+t-2}{(s-1)-1} = \binom{s+t-3}{s-2}$

*   对于 $r(s, t-1)$：令 $s' = s, t' = t-1$。则 $s'+t' = s+(t-1) = s+t-1 < s+t$。
    所以，根据归纳假设：
    $r(s, t-1) \le \binom{s+(t-1)-2}{s-1} = \binom{s+t-3}{s-1}$

将这两个上界代回到 $r(s,t)$ 的不等式中：
$$r(s,t) \le \binom{s+t-3}{s-2} + \binom{s+t-3}{s-1}$$

看到这个形式，熟悉组合数学的朋友们是不是眼睛一亮，嘴角疯狂上扬？这不就是大名鼎鼎的**帕斯卡恒等式 (Pascal's Identity)** 嘛！
帕斯卡恒等式告诉我们：$\binom{n}{k} + \binom{n}{k-1} = \binom{n+1}{k}$。
（或者写成 $\binom{n}{k-1} + \binom{n}{k} = \binom{n+1}{k}$，顺序无所谓）
在这里，令 $n = s+t-3$，$k = s-1$ (那么 $k-1 = s-2$)。
所以，
$$\binom{s+t-3}{s-2} + \binom{s+t-3}{s-1} = \binom{(s+t-3)+1}{s-1} = \binom{s+t-2}{s-1}$$

完美！我们成功证明了：

$$
r(s,t) \le \binom{s+t-2}{s-1}
$$


归纳法完成！这个定理给出了拉姆齐数的一个非常优雅且易于计算的显式上界。是不是感觉帕斯卡大神在冥冥之中助了我们一臂之力？

**这个上界效果如何？**
*   对于 $r(3,3)$：$\binom{3+3-2}{3-1} = \binom{4}{2} = 6$。精确！
*   对于 $r(3,4)$：$\binom{3+4-2}{3-1} = \binom{5}{2} = 10$。已知 $$r(3,4)=9$$。这个上界是10，还不错。
*   对于 $r(4,4)$：$\binom{4+4-2}{4-1} = \binom{6}{3} = \frac{6 \times 5 \times 4}{3 \times 2 \times 1} = 20$。已知 $$r(4,4)=18$$。上界是20，也挺接近。
*   对于 $r(5,5)$：$\binom{5+5-2}{5-1} = \binom{8}{4} = \frac{8 \times 7 \times 6 \times 5}{4 \times 3 \times 2 \times 1} = 70$。目前我们只知道 $$43 \le r(5,5) \le 48$$。这里的上界70就显得比较宽松了。

所以，虽然这个二项式系数上界非常漂亮，但随着 $s$ 和 $t$ 的增大，它与真实的拉姆齐数之间的差距可能会越来越大。但这并不妨碍它作为证明拉姆齐数存在性的一个重要里程碑，并且在很多情况下，它仍然是一个非常有用的估计。

## 总结：优雅证明背后的数学之美

好啦，今天的“反卷ccj数学小课堂之证明特辑”到这里就告一段落了。我们一起详细解剖了拉姆齐数两个非常重要的上界不等式的证明过程：

1.  **递归不等式 $r(s,t) \le r(s-1, t) + r(s, t-1)$**：通过巧妙的“选点大法”和鸽巢原理，展示了如何从局部关系推导全局性质，甚至在特定条件下还能“减1”优化。
2.  **二项式系数上界 $r(s,t) \le \binom{s+t-2}{s-1}$**：利用强大的数学归纳法，并借力帕斯卡恒等式，给出了一个直接的、关于 $s$ 和 $t$ 的显式上界。

希望通过今天的深度剖析，大家不仅理解了这两个证明的每一步，更能体会到数学证明中那种逻辑的严密性、方法的巧妙性以及结论的优美性。数学不仅仅是计算，它更是一种思维方式，一种探索未知、发现规律的冒险！

我是依然致力于让你爱上数学的**反卷ccj**！如果你对今天的证明有任何疑问，或者还想听我“扒”哪些有趣的数学定理，尽管在评论区告诉我！咱们下期再见，拜了个拜！记得，保持对世界的好奇，因为数学的奥秘无处不在！